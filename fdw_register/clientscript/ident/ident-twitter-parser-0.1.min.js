ident.getEnchancedTwitterProfile=function(c,b){var d=new ident.historyItem(c,"");d.apiName=b;d.name="Twitter";d.domain="twitter.com";d.schema="hCard";d.contentType="Profile";var e="";if(c.indexOf("/")>-1){parts=c.split("/");e=parts[parts.length-1]}var a="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20twitter.user.profile%20where%20id%3D%27"+e+"%27&format=json&env=http%3A%2F%2Fdatatables.org%2Falltables.env";d.apiurl=a;ident.history[ident.history.length]=d;jQuery.getJSON(a+"&callback=?",function(f){ident.processEnchancedTwitterJson(f,d,c)})};ident.processEnchancedTwitterJson=function(json,historyItem,url){ident._apiReturnCount++;if(ident.isObject(json)){yql=json}else{yql=eval("("+json+")")}historyItem.rawJSON=yql;var sourceUrl="";var hcard=new ident.hCard();hcard.sourceUrl=url;hcard.domain="twitter.com";hcard.name="Twitter";if(yql!=null){if(yql.query!=null){if(yql.query.results!=null){if(yql.query.results.item!=null){if(yql.query.results.item.item!=null){if(yql.query.results.item.item.length!=null){for(var j=0;j<=yql.query.results.item.item.length-1;j++){if(yql.query.results.item.item[j].rel){if(yql.query.results.item.item[j].rel=="rel:Photo"){hcard.photo[0]=yql.query.results.item.item[j].resource}}}}}if(yql.query.results.item.meta!=null){if(yql.query.results.item.meta.length!=null){for(var j=0;j<=yql.query.results.item.meta.length-1;j++){if(yql.query.results.item.meta[j].property){if(yql.query.results.item.meta[j].property=="foaf:name"){hcard.fn=yql.query.results.item.meta[j].content}if(yql.query.results.item.meta[j].property=="foaf:nick"){hcard.nickname=yql.query.results.item.meta[j].content}if(yql.query.results.item.meta[j].property=="foaf:homepage"){hcard.url[0]=yql.query.results.item.meta[j].content}if(yql.query.results.item.meta[j].property=="dc:description"){if(yql.query.results.item.meta[j].content!=undefined){hcard.note[0]=yql.query.results.item.meta[j].content}}if(yql.query.results.item.meta[j].property=="geo:location"){var adr=new ident.adr();adr.locality=yql.query.results.item.meta[j].content;hcard.adr[0]=adr}}}}}}}}}ident.profiles[ident.profiles.length++]=hcard;ident.createCombinedhCard();ident.profileAddedEvent()};